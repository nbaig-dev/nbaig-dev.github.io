<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://nbaig-dev.github.io/ name=base><meta content=no-cache http-equiv=cache-control><meta content=0 http-equiv=expires><meta content=no-cache http-equiv=pragma><title>~/nbaig-dev • Understanding rust ownership and borrowing.</title><link href=https://nbaig-dev.github.io/img/seedling.png rel=icon type=image/png><link href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 105 55"><text y=".7em" font-size="82">🌱</text></svg>' rel=icon><link href=https://nbaig-dev.github.io/atom.xml rel=alternate title=~/nbaig-dev type=application/atom+xml><link href="https://nbaig-dev.github.io/custom_subset.css?h=6de30382822eb2c02ee0" rel=stylesheet><link href="https://nbaig-dev.github.io/main.css?h=cfd5ee6052d82c486e13" rel=stylesheet><meta content="light dark" name=color-scheme><meta content=#087e96 name=theme-color><meta content="Welcome to this blog post where I will be sharing my understanding of Rust's ownership and borrowing concepts. These are fundamental aspects of Rust that make it unique among programming languages, providing memory safety without the need for a garbage collector. 

Please note that this post is a reflection of my personal journey with Rust and is not intended to replace comprehensive learning resources like the Rust Book. It's always a good idea to refer to multiple sources when learning a new concept." name=description><meta content="Welcome to this blog post where I will be sharing my understanding of Rust's ownership and borrowing concepts. These are fundamental aspects of Rust that make it unique among programming languages, providing memory safety without the need for a garbage collector. 

Please note that this post is a reflection of my personal journey with Rust and is not intended to replace comprehensive learning resources like the Rust Book. It's always a good idea to refer to multiple sources when learning a new concept." property=og:description><meta content="index, nofollow" name=robots><meta content="Understanding rust ownership and borrowing." property=og:title><meta content=article property=og:type><meta content="https://nbaig-dev.github.io/blog/social_cards/blog.jpg?h=f375947d5b252b336e60" property=og:image><meta content=1400 property=og:image:width><meta content=800 property=og:image:height><meta content="https://nbaig-dev.github.io/blog/social_cards/blog.jpg?h=f375947d5b252b336e60" name=twitter:image><meta content=summary_large_image name=twitter:card><meta content=en_GB property=og:locale><meta content=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/ property=og:url><meta content=~/nbaig-dev property=og:site_name><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com;;connect-src 'self' gc.zgo.at https://nbaig-dev.goatcounter.com/count;script-src 'self' gc.zgo.at 'self'" http-equiv=Content-Security-Policy><noscript><link href=https://nbaig-dev.github.io/no_js.css rel=stylesheet></noscript><script src=https://nbaig-dev.github.io/js/initializeTheme.min.js></script><script defer src=https://nbaig-dev.github.io/js/themeSwitcher.min.js></script><script async data-goatcounter=https://nbaig-dev.goatcounter.com/count src=https://gc.zgo.at/count.js></script><script src="https://nbaig-dev.github.io/js/searchElasticlunr.min.js?h=5ddcb5767730b9edb560" defer></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://nbaig-dev.github.io>~/nbaig-dev</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://nbaig-dev.github.io/blog/> blog </a><li><a class="nav-links no-hover-padding" href=https://nbaig-dev.github.io/archive/> archive </a><li><a class="nav-links no-hover-padding" href=https://nbaig-dev.github.io/tags/> tags </a><li class=js><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><li class="theme-switcher-wrapper js"><div aria-label="Toggle dark mode" title="Toggle dark/light mode" aria-pressed=false class=theme-switcher role=button tabindex=0></div><div aria-label="Reset mode to default" title="Reset mode to default" aria-hidden=true class=theme-resetter role=button tabindex=0></div></ul></div></nav></header><div class=content><main><article><h1 class=article-title>Understanding rust ownership and borrowing.</h1><ul class=meta><li>2nd Feb 2024</li> • <li title="2277 words">12 min read</li> • <li>Tags: <li><a href=https://nbaig-dev.github.io/tags/rust/>rust</a>, <li><a href=https://nbaig-dev.github.io/tags/learning/>learning</a></ul><ul class="meta last-updated"><li>Last updated on 2nd Feb 2024</ul><section class=body><details><summary><b>Table of Contents</b></summary> <div class=toc-container><ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#understanding-rust-s-ownership-and-borrowing-building-robust-and-memory-safe-code>Understanding Rust’s Ownership and Borrowing: Building Robust and Memory-Safe Code</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#introduction>Introduction</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-the-ownership-model>1. The Ownership Model</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-1-what-is-ownership>1.1 What is Ownership?</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-2-ownership-rules>1.2 Ownership Rules</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-3-move-semantics>1.3 Move Semantics</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-borrowing>2. Borrowing</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-1-what-is-borrowing>2.1 What is Borrowing?</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-1-imutable-borrowing>2.1 Imutable Borrowing</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-2-mutable-borrowing>2.2 Mutable Borrowing</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-lifetimes>3. Lifetimes</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-1-understanding-lifetimes>3.1 Understanding Lifetimes</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-2-lifetimes-prevent-dangling-references>3.2 Lifetimes Prevent Dangling References</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-3-lifetime-annotations>3.3 Lifetime Annotations</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#4-ownership-and-concurrency>4. Ownership and Concurrency</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#4-1-ownership-in-concurrent-programming>4.1 Ownership in Concurrent Programming</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#5-common-patterns-and-best-practices>5. Common Patterns and Best Practices</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#5-1-structuring-code-with-ownership>5.1 Structuring Code with Ownership</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#5-2-avoiding-common-pitfalls>5.2 Avoiding Common Pitfalls</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#6-conclusion>6. Conclusion</a></ul></ul></div></details><h1 id=understanding-rust-s-ownership-and-borrowing-building-robust-and-memory-safe-code><a aria-label="Anchor link for: understanding-rust-s-ownership-and-borrowing-building-robust-and-memory-safe-code" class="header-anchor no-hover-padding" href=#understanding-rust-s-ownership-and-borrowing-building-robust-and-memory-safe-code><span aria-hidden=true class=link-icon></span></a> Understanding Rust’s Ownership and Borrowing: Building Robust and Memory-Safe Code</h1><pre class=z-code><code><span class="z-text z-plain">This blog post is just me trying to demonstrate my knowledge of Rust.
</span><span class="z-text z-plain">If you are here to learn concepts related to Ownership and Borrowing please refer the Rust Book or for that matter any other resource available on the internet.
</span><span class="z-text z-plain">I don't think this post should be considered as a learning material.
</span></code></pre><h2 id=introduction><a aria-label="Anchor link for: introduction" class="header-anchor no-hover-padding" href=#introduction><span aria-hidden=true class=link-icon></span></a> Introduction</h2><p>Rust’s ownership and borrowing system is a distinctive feature that sets it apart from other programming languages. This system is designed to ensure memory safety without the need for a garbage collector. In this blog post, we will delve into the core concepts of ownership and borrowing in Rust, exploring how they contribute to writing robust, high-performance code with minimal runtime overhead.<h2 id=1-the-ownership-model><a aria-label="Anchor link for: 1-the-ownership-model" class="header-anchor no-hover-padding" href=#1-the-ownership-model><span aria-hidden=true class=link-icon></span></a> 1. The Ownership Model</h2><h3 id=1-1-what-is-ownership><a aria-label="Anchor link for: 1-1-what-is-ownership" class="header-anchor no-hover-padding" href=#1-1-what-is-ownership><span aria-hidden=true class=link-icon></span></a> 1.1 What is Ownership?</h3><p>When you assign a value to a variable, Rust allocates memory to store that value. This memory is automatically freed when the variable (the owner of the value) goes out of scope. This automatic cleanup of memory is done by a piece of code called the “drop” function which is called automatically at the closing brace of the scope. By enforcing strict ownership rules, Rust prevents common programming errors like null or dangling pointers, double free, and data races. For example, since there can only be one owner at a time, you can’t accidentally modify data that’s simultaneously being used elsewhere. And because values are automatically cleaned up when their owners go out of scope, you don’t have to worry about manually freeing memory and potentially causing double free errors.<h3 id=1-2-ownership-rules><a aria-label="Anchor link for: 1-2-ownership-rules" class="header-anchor no-hover-padding" href=#1-2-ownership-rules><span aria-hidden=true class=link-icon></span></a> 1.2 Ownership Rules</h3><p>Ownership is a fundamental concept in Rust that ensures memory safety without the need for a garbage collector. It revolves around three main rules:<ol><li>Each value in Rust has a variable that’s called its owner.<li>There can only be one owner at a time.<li>When the owner goes out of scope, the value will be dropped.</ol><h3 id=1-3-move-semantics><a aria-label="Anchor link for: 1-3-move-semantics" class="header-anchor no-hover-padding" href=#1-3-move-semantics><span aria-hidden=true class=link-icon></span></a> 1.3 Move Semantics</h3><p>In Rust, the concept of “moving” ownership is a key part of how the language ensures memory safety. When you assign a variable to another variable, Rust by default “moves” the ownership, rather than copying the data. This means that the original variable can no longer be used.<p><strong>Here’s an example:</strong><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> s1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">String</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> s2 <span class="z-keyword z-operator z-assignment z-rust">=</span> s1<span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>In this code, s1 is a string that owns its data. When we assign s1 to s2, Rust moves the ownership of the data from s1 to s2. Now s2 is the owner of the data, and s1 can no longer be used. If you try to use s1 after this, you’ll get a compile-time error.<p>This behavior prevents multiple variables from pointing to the same memory location, which can lead to data races and other memory-related issues. Since there’s always exactly one owner, you don’t have to worry about another part of your code unexpectedly changing the data you’re working with.<p>Moreover, this move semantics is also beneficial in terms of performance. Moving ownership often involves simply changing a pointer, which is much faster than copying a large amount of data. And because Rust ensures that the old variable can’t be used after the move, it’s safe to free the memory as soon as the new owner goes out of scope.<h2 id=2-borrowing><a aria-label="Anchor link for: 2-borrowing" class="header-anchor no-hover-padding" href=#2-borrowing><span aria-hidden=true class=link-icon></span></a> 2. Borrowing</h2><h3 id=2-1-what-is-borrowing><a aria-label="Anchor link for: 2-1-what-is-borrowing" class="header-anchor no-hover-padding" href=#2-1-what-is-borrowing><span aria-hidden=true class=link-icon></span></a> 2.1 What is Borrowing?</h3><p>Borrowing is a key feature in Rust that complements the ownership system. It allows a piece of data to be accessed by different parts of your program without transferring ownership. This is useful when you want to use a value but still want the owner to retain its ownership.<p>There are two types of borrowing in Rust: immutable and mutable.<h3 id=2-1-imutable-borrowing><a aria-label="Anchor link for: 2-1-imutable-borrowing" class="header-anchor no-hover-padding" href=#2-1-imutable-borrowing><span aria-hidden=true class=link-icon></span></a> 2.1 Imutable Borrowing</h3><p>This allows a value to be read from multiple places without changing it. You can have multiple immutable references to the same data. Here’s an example:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> s <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">String</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> r1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>s<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> r2 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>s<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span> and <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> r1<span class="z-punctuation z-separator z-rust">,</span> r2<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>In this code, r1 and r2 are both references to s. They “borrow” s without taking ownership, so s is still valid after this code.<h3 id=2-2-mutable-borrowing><a aria-label="Anchor link for: 2-2-mutable-borrowing" class="header-anchor no-hover-padding" href=#2-2-mutable-borrowing><span aria-hidden=true class=link-icon></span></a> 2.2 Mutable Borrowing</h3><p>This allows a value to be changed. You can only have one mutable reference to a particular piece of data in a particular scope. This restriction prevents data races at compile time.<p><strong>Here’s an example:</strong><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> s <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">String</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> r1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> s<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-operator z-arithmetic z-rust">*</span>r1 <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>, world<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> r1<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre><p>In this code, r1 is a mutable reference to s. It can modify s, but no other references to s can exist while r1 is in scope.<p>By enforcing these rules, Rust’s borrowing system allows your program to access data in a controlled and safe manner, preventing a whole class of bugs related to ownership and concurrency.<h2 id=3-lifetimes><a aria-label="Anchor link for: 3-lifetimes" class="header-anchor no-hover-padding" href=#3-lifetimes><span aria-hidden=true class=link-icon></span></a> 3. Lifetimes</h2><h3 id=3-1-understanding-lifetimes><a aria-label="Anchor link for: 3-1-understanding-lifetimes" class="header-anchor no-hover-padding" href=#3-1-understanding-lifetimes><span aria-hidden=true class=link-icon></span></a> 3.1 Understanding Lifetimes</h3><p>In Rust, memory safety is a core principle. One of the ways Rust achieves this is through a feature called ‘lifetimes’. Lifetimes are Rust’s way of ensuring that all references in your code are valid for as long as you’re using them.<p>A lifetime is a construct in Rust that prevents dangling references by ensuring that any reference to an object will not outlive the object itself. In other words, it guarantees that the referenced object will not be destroyed while there are still references to it.<p>When you create a reference to an object in Rust, the compiler automatically assigns a lifetime to that reference. This lifetime determines the scope within which that reference is valid. Once you leave that scope, the reference is no longer valid and you can’t use it anymore. Here’s a simple example:<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> x <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> x has a lifetime for this block
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> r <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>x<span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> r has the same lifetime as x
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> x and r go out of scope here
</span></span></code></pre><p>In this example, x and r have the same lifetime, which is the scope of the block they’re in. Once we leave that block, x and r go out of scope and are no longer valid.<h3 id=3-2-lifetimes-prevent-dangling-references><a aria-label="Anchor link for: 3-2-lifetimes-prevent-dangling-references" class="header-anchor no-hover-padding" href=#3-2-lifetimes-prevent-dangling-references><span aria-hidden=true class=link-icon></span></a> 3.2 Lifetimes Prevent Dangling References</h3><p>One of the main benefits of lifetimes is that they prevent dangling references. A dangling reference is a reference that points to an object that has already been destroyed. This can lead to undefined behavior and serious bugs in your programs.<p>By ensuring that a reference cannot outlive the object it refers to, lifetimes prevent this kind of problem. If you try to use a reference after its object has been destroyed, the Rust compiler will give you an error.<h3 id=3-3-lifetime-annotations><a aria-label="Anchor link for: 3-3-lifetime-annotations" class="header-anchor no-hover-padding" href=#3-3-lifetime-annotations><span aria-hidden=true class=link-icon></span></a> 3.3 Lifetime Annotations</h3><p>Lifetime annotations in Rust are a way for explicitly specifying the lifetimes of references in function signatures. This is necessary when the lifetimes of arguments or return values depend on each other.<p>The syntax for lifetime annotations is an apostrophe followed by a name, like <code>'a</code>. This name is then used to refer to the lifetime in the rest of the function signature.<p><strong>Here’s an example of a function with lifetime annotations:</strong><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">longest</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-type z-rust">str</span>, <span class="z-variable z-parameter z-rust">y</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-type z-rust">str</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-type z-rust">str</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> x<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-comparison z-rust">></span> y<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        x
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        y
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>In this example, ’a is a lifetime annotation. The function signature tells Rust that for some lifetime ’a, the function takes two parameters, both of which are string references that live at least as long as ’a. The function returns a string reference that also lives at least as long as ’a.<p>This does not change the lifetimes of any values passed in or returned, but it does tell Rust that any values that do not adhere to this contract should be rejected by the compiler. This is the core of Rust’s ability to make memory safety guarantees without needing a garbage collector.<h2 id=4-ownership-and-concurrency><a aria-label="Anchor link for: 4-ownership-and-concurrency" class="header-anchor no-hover-padding" href=#4-ownership-and-concurrency><span aria-hidden=true class=link-icon></span></a> 4. Ownership and Concurrency</h2><h3 id=4-1-ownership-in-concurrent-programming><a aria-label="Anchor link for: 4-1-ownership-in-concurrent-programming" class="header-anchor no-hover-padding" href=#4-1-ownership-in-concurrent-programming><span aria-hidden=true class=link-icon></span></a> 4.1 Ownership in Concurrent Programming</h3><p>Rust’s ownership model is a powerful tool that ensures memory safety and prevents data races, making it particularly well-suited for concurrent programming. In concurrent programming, multiple threads can access data simultaneously. If these threads can write to the data, it can lead to data races, where the threads are competing to change the data, leading to unpredictable results.<p>Rust’s ownership model helps prevent this. In Rust, each value has a single owner, and the value is dropped when its owner goes out of scope. This ensures that at any given time, either one mutable reference or any number of immutable references to a particular piece of data exist. This rule is enforced at compile time, preventing data races at runtime.<p><strong>Consider the following example:</strong><pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span>thread<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">rc<span class="z-punctuation z-accessor z-rust">::</span></span>Rc<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> data <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Rc<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-support z-macro z-rust">vec!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">for</span> <span class="z-keyword z-operator z-rust">_</span> <span class="z-keyword z-operator z-rust">in</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-keyword z-operator z-range z-rust">..</span><span class="z-constant z-numeric z-integer z-decimal z-rust">3</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-storage z-type z-rust">let</span> data <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Rc<span class="z-punctuation z-accessor z-rust">::</span></span>clone<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&</span>data</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-meta z-path z-rust">thread<span class="z-punctuation z-accessor z-rust">::</span></span>spawn<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">move</span> <span class="z-keyword z-operator z-logical z-rust">||</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">            <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{:?}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span>data<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>In this example, we’re creating multiple threads and sharing read-only data between them using Rc, a reference-counted smart pointer. If we tried to mutate data from within the threads, the Rust compiler would give us an error, preventing a potential data race.<h2 id=5-common-patterns-and-best-practices><a aria-label="Anchor link for: 5-common-patterns-and-best-practices" class="header-anchor no-hover-padding" href=#5-common-patterns-and-best-practices><span aria-hidden=true class=link-icon></span></a> 5. Common Patterns and Best Practices</h2><h3 id=5-1-structuring-code-with-ownership><a aria-label="Anchor link for: 5-1-structuring-code-with-ownership" class="header-anchor no-hover-padding" href=#5-1-structuring-code-with-ownership><span aria-hidden=true class=link-icon></span></a> 5.1 Structuring Code with Ownership</h3><h4 id=5-1-1-minimize-scope-of-mutability><a aria-label="Anchor link for: 5-1-1-minimize-scope-of-mutability" class="header-anchor no-hover-padding" href=#5-1-1-minimize-scope-of-mutability><span aria-hidden=true class=link-icon></span></a> 5.1.1 Minimize Scope of Mutability</h4><p>In Rust, you should aim to minimize the scope of mutability. This means you should prefer using let over let mut unless you specifically need a mutable variable. This helps prevent accidental mutations.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> x <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> prefer this
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> y <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> over this, unless you need to mutate y
</span></span></code></pre><h4 id=5-1-2-use-references-instead-of-moving-ownership><a aria-label="Anchor link for: 5-1-2-use-references-instead-of-moving-ownership" class="header-anchor no-hover-padding" href=#5-1-2-use-references-instead-of-moving-ownership><span aria-hidden=true class=link-icon></span></a> 5.1.2 Use References Instead of Moving Ownership</h4><p>If you don’t need to take ownership of a value, prefer to take a reference to it instead. This allows the caller to continue using the value after the call.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">print_length</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span>String</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> prefer this
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> s<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">print_length</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> String</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> over this
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> s<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h4 id=5-1-3-leverage-lifetimes><a aria-label="Anchor link for: 5-1-3-leverage-lifetimes" class="header-anchor no-hover-padding" href=#5-1-3-leverage-lifetimes><span aria-hidden=true class=link-icon></span></a> 5.1.3 Leverage Lifetimes</h4><p>When dealing with references, you may need to specify lifetimes. Lifetimes are a way of ensuring that references are valid for a certain scope. They help prevent dangling references and memory safety issues.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">longest</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span><span class="z-punctuation z-definition z-generic z-end z-rust">></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-type z-rust">str</span>, <span class="z-variable z-parameter z-rust">y</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-type z-rust">str</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-modifier z-lifetime z-rust">'a</span> <span class="z-storage z-type z-rust">str</span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> lifetimes in action
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> x<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-comparison z-rust">></span> y<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        x
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span> <span class="z-keyword z-control z-rust">else</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        y
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h4 id=5-1-4-use-result-for-error-handling><a aria-label="Anchor link for: 5-1-4-use-result-for-error-handling" class="header-anchor no-hover-padding" href=#5-1-4-use-result-for-error-handling><span aria-hidden=true class=link-icon></span></a> 5.1.4 Use Result for Error Handling</h4><p>Rust doesn’t have exceptions. Instead, it uses the Result type for functions that can fail. This forces you to handle errors where they occur, leading to more robust code.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">fs<span class="z-punctuation z-accessor z-rust">::</span></span>File<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">open_file</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">path</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&</span><span class="z-storage z-type z-rust">str</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">io<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust"><</span>File<span class="z-punctuation z-definition z-generic z-end z-rust">></span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> using Result for error handling
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">File<span class="z-punctuation z-accessor z-rust">::</span></span>open<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>path</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><h4 id=5-1-5-use-match-or-if-let-for-control-flow><a aria-label="Anchor link for: 5-1-5-use-match-or-if-let-for-control-flow" class="header-anchor no-hover-padding" href=#5-1-5-use-match-or-if-let-for-control-flow><span aria-hidden=true class=link-icon></span></a> 5.1.5 Use match or if let for Control Flow</h4><p>Rust’s match and if let constructs are powerful tools for control flow. They allow you to handle multiple patterns in a clear and concise way.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> some_option <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">match</span> some_option <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>i</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> i<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">None</span> <span class="z-keyword z-operator z-rust">=></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Some</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>i</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> some_option <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> i<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre><h3 id=5-2-avoiding-common-pitfalls><a aria-label="Anchor link for: 5-2-avoiding-common-pitfalls" class="header-anchor no-hover-padding" href=#5-2-avoiding-common-pitfalls><span aria-hidden=true class=link-icon></span></a> 5.2 Avoiding Common Pitfalls</h3><h4 id=5-2-1-attempting-to-use-a-value-after-transferring-ownership><a aria-label="Anchor link for: 5-2-1-attempting-to-use-a-value-after-transferring-ownership" class="header-anchor no-hover-padding" href=#5-2-1-attempting-to-use-a-value-after-transferring-ownership><span aria-hidden=true class=link-icon></span></a> 5.2.1 Attempting to Use a Value After Transferring Ownership</h4><p>One common pitfall is attempting to use a value after its ownership has been transferred. In Rust, once you’ve passed a value to a function, you no longer have ownership of that value and can’t use it again.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> s <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">String</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-function z-rust">takes_ownership</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>s</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> s<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This will cause a compile error
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">takes_ownership</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">s</span><span class="z-punctuation z-separator z-rust">:</span> String</span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span><span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> s<span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>To address this issue, you can return the value from the function if you still need it, or use a reference to borrow the value instead of transferring ownership.<h4 id=5-2-2-mutable-and-immutable-references><a aria-label="Anchor link for: 5-2-2-mutable-and-immutable-references" class="header-anchor no-hover-padding" href=#5-2-2-mutable-and-immutable-references><span aria-hidden=true class=link-icon></span></a> 5.2.2 Mutable and Immutable References</h4><p>Another common pitfall is having a mutable reference while also having an immutable reference. Rust’s borrowing rules don’t allow this because it could lead to data races.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> s <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">String</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> r1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>s<span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> no problem
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> r2 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span>s<span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> no problem
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> r3 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&</span><span class="z-storage z-modifier z-rust">mut</span> s<span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> BIG PROBLEM
</span></span></code></pre><p>To address this issue, you need to ensure that you don’t have any immutable references to a value before creating a mutable reference.<h4 id=5-2-3-dangling-references><a aria-label="Anchor link for: 5-2-3-dangling-references" class="header-anchor no-hover-padding" href=#5-2-3-dangling-references><span aria-hidden=true class=link-icon></span></a> 5.2.3 Dangling References</h4><p>Dangling references, which are references to a location in memory that may have been given to someone else, are prevented by Rust’s ownership system. However, it’s still a pitfall to be aware of.<pre class="language-rust z-code" data-lang=rust><code class=language-rust data-lang=rust><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> reference_to_nothing <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">dangle</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">dangle</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-></span> <span class="z-keyword z-operator z-rust">&</span>String</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> dangles a reference
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> s <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-type z-rust">String</span><span class="z-meta z-path z-rust"><span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">"</span>hello<span class="z-punctuation z-definition z-string z-end z-rust">"</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-operator z-bitwise z-rust">&</span>s
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre><p>To address this issue, you should return the owned value directly, which gives ownership back to the calling function.<p>These are just a few of the common pitfalls you might encounter when working with ownership and borrowing in Rust. By understanding these issues and how to address them, you can write safer and more efficient Rust code.<h2 id=6-conclusion><a aria-label="Anchor link for: 6-conclusion" class="header-anchor no-hover-padding" href=#6-conclusion><span aria-hidden=true class=link-icon></span></a> 6. Conclusion</h2><p>In this article, we’ve debunked some common misconceptions about Rust and highlighted the common pitfalls when working with ownership and borrowing. The key takeaway is that Rust’s unique features, such as its strict ownership and borrowing rules, are not obstacles but powerful tools for writing safe, concurrent, and efficient code.<p>Understanding and embracing these concepts is crucial to leveraging the full potential of Rust. While the learning curve may be steep, the payoff in terms of performance and safety is significant. Rust’s memory safety guarantees, without the need for a garbage collector, make it a compelling choice for systems programming and beyond.<p>Moreover, Rust’s growing ecosystem and supportive community make it a vibrant language to work with. As you continue to explore Rust, don’t shy away from these complex concepts. Instead, embrace them, understand them, and use them to your advantage.<p>I encourage you to apply what you’ve learned in this article by building real-world projects in Rust. This will not only solidify your understanding but also give you a sense of the power and efficiency that Rust brings to the table. Happy coding!</section><nav class="full-width article-navigation"><div><a href=https://nbaig-dev.github.io/blog/06-rust-common-misconceptions/>‹ Common misconceptions in rust.</a></div><div><a href=https://nbaig-dev.github.io/blog/02-rust-cli-alternatives/> CLI alternatives written in Rust. ›</a></div></nav></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=overlay for=toc-toggle></label><label title="Toggle Table of Contents" class=button for=toc-toggle id=toc-button><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#understanding-rust-s-ownership-and-borrowing-building-robust-and-memory-safe-code>Understanding Rust’s Ownership and Borrowing: Building Robust and Memory-Safe Code</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#introduction>Introduction</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-the-ownership-model>1. The Ownership Model</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-1-what-is-ownership>1.1 What is Ownership?</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-2-ownership-rules>1.2 Ownership Rules</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#1-3-move-semantics>1.3 Move Semantics</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-borrowing>2. Borrowing</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-1-what-is-borrowing>2.1 What is Borrowing?</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-1-imutable-borrowing>2.1 Imutable Borrowing</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#2-2-mutable-borrowing>2.2 Mutable Borrowing</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-lifetimes>3. Lifetimes</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-1-understanding-lifetimes>3.1 Understanding Lifetimes</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-2-lifetimes-prevent-dangling-references>3.2 Lifetimes Prevent Dangling References</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#3-3-lifetime-annotations>3.3 Lifetime Annotations</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#4-ownership-and-concurrency>4. Ownership and Concurrency</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#4-1-ownership-in-concurrent-programming>4.1 Ownership in Concurrent Programming</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#5-common-patterns-and-best-practices>5. Common Patterns and Best Practices</a> <ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#5-1-structuring-code-with-ownership>5.1 Structuring Code with Ownership</a><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#5-2-avoiding-common-pitfalls>5.2 Avoiding Common Pitfalls</a></ul><li><a href=https://nbaig-dev.github.io/blog/03-understanding-rust-ownership-and-borrowing/#6-conclusion>6. Conclusion</a></ul></ul></div></div></div><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://nbaig-dev.github.io/js/copyCodeToClipboard.min.js></script><script defer src=https://nbaig-dev.github.io/js/footnoteBacklinks.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li class=js><a class="nav-links no-hover-padding social" data-encoded-email="bmJhaWcuZGV2QGdtYWlsLmNvbQ==" href=#><img alt=email src=https://nbaig-dev.github.io/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://github.com/nbaig-dev/> <img alt=github src=https://nbaig-dev.github.io/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel=" me" href=https://www.linkedin.com/in/nbaig-dev/> <img alt=linkedin src=https://nbaig-dev.github.io/social_icons/linkedin.svg title=linkedin> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://nbaig-dev.github.io/about/> about </a><li><a class="nav-links no-hover-padding" href=https://nbaig-dev.github.io/privacy/> privacy policy </a><li><a class="nav-links no-hover-padding" href=https://nbaig-dev.github.io/sitemap.xml> sitemap </a></ul> </small></nav><div class=credits><small> Powered by <a href=https://www.getzola.org>Zola</a> & <a href=https://github.com/welpo/tabi>tabi</a> </small></div></section><script async src=https://nbaig-dev.github.io/js/decodeMail.min.js></script><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input , aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=n-results>0</span> <span id=result-text-singular>result</span><span id=result-text-plural>results</span></div><div id=results role=listbox></div></div></div>